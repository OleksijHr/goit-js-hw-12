{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n\nexport const createMurkup =  function (objArr) {\n\n    return objArr.map(({ views, comments, downloads, likes, webformatURL, tags, largeImageURL }) => {\n        return `<li>\n        <div class=\"img-box\">\n        <a href=\"${largeImageURL}\">\n        <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\">\n        </a>\n        <ul class=\"value-list\">\n        <li class=\"likes value-item\"><p class=\"article\">Likes</p><p class=\"value\">${likes}</p></li>\n        <li class=\"views value-item\" ><p class=\"article\">Views</p><p class=\"value\">${views}</p></li>\n        <li class=\"comments value-item\"><p class=\"article\">Comments</p><p class=\"value\">${comments}</p></li>\n        <li class=\"downloads value-item\"><p class=\"article\">Downloads</p><p class=\"value\">${downloads}</p></li>\n        </ul></div>\n        </li>`\n    }).join(\"\");\n};\n","// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\n\nimport axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"43211197-e02e136a3ee46bcda7d5bf66f\";\n\n\nexport async function searchObject(searchName, page) {\n    const {data} = await axios(`${BASE_URL}`, {\n        params: {\n            key: API_KEY,\n            q: searchName,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page,\n        }\n    });\n    return data;\n};","// // тут уся логіка роботи\n\nimport {createMurkup} from './js/render-functions.js';\nimport { searchObject } from './js/pixabay-api.js';\n\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n// Описаний у документації\nimport simpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst searchForm = document.querySelector(\".search-form\");\nconst search = document.querySelector(\"input\");\nconst objectList = document.querySelector(\".object-list\");\nconst loader = document.querySelector(\".loader-box\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nconst lightboxGallery = new simpleLightbox('.gallery a', {\n    caption: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    showCounter: false\n});\n\nsearchForm.addEventListener(\"submit\", handleSubmit);\nloadMoreBtn.addEventListener(\"click\", loadMore);\n\nlet page = 0;\nlet pageLimit;\nlet searchValue;\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n    \n    if (!search.value) {\n        return iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            backgroundColor: \"red\",\n            closeOnClick: true,\n            position: \"topCenter\"\n        });\n    }\n    \n    objectList.textContent = \"\";\n    loader.style.display = \"flex\";\n    searchValue = event.currentTarget.elements.search.value.trim();\n    page = 1;\n    \n    searchObject(searchValue, page)\n        .then(data => {\n            console.log(data);\n            if (!data.total) {\n                loader.style.display = \"none\";\n                loadMoreBtn.style.display = \"none\";\n\n                return iziToast.info({\n                    message: \"Don't found\",\n                    closeOnClick: true,\n                    position: \"topCenter\"\n                })\n            }\n\n            updateMurkup(data.hits);\n            event.target.reset();\n            loader.style.display = \"none\";\n            loadMoreBtn.style.display = \"block\";\n        })\n        .catch(error => {\n            loader.style.display = \"none\";\n            return iziToast.error({\n                message: `${error.message}`,\n                backgroundColor: \"red\",\n                position: \"topCenter\"\n            })\n        })\n}\n\n\n\n\nasync function loadMore() {  \n    \n    loader.style.display = \"flex\";\n    \n    await searchObject(searchValue, page)\n        .then(data => {\n\n            updateMurkup(data.hits);\n\n            const liElement = document.querySelector('li');\n            const { height } = liElement.getBoundingClientRect();\n            scrollVertical(height * 2, 0);\n            \n            searchForm.reset();\n            loader.style.display = \"none\";\n            loadMoreBtn.style.display = \"block\";\n            page = page + 1;\n            pageLimit = Math.floor(data.totalHits / 15);\n            \n            if (page > pageLimit) {\n                loadMoreBtn.style.display = \"none\";\n                iziToast.show({\n                    titleColor: 'white',\n                    message: `We're sorry, but you've reached the end of search results!`,\n                    messageColor: 'black',\n                    color: 'blue',\n                    position: 'topCenter',\n                    timeout: '5000',\n                });\n            }\n        })\n        .catch(error => {\n            loader.style.display = \"none\";\n            return iziToast.error({\n                message: `${error.message}`,\n                backgroundColor: \"red\",\n                position: \"topCenter\"\n            })\n        })\n}\n\n\nfunction updateMurkup(hits) {\n        objectList.insertAdjacentHTML('beforeend', createMurkup(hits));\n        lightboxGallery.refresh();\n}\n\n\nfunction scrollVertical(x = 0, y = 0) {\n  window.scrollBy({ top: x, left: y, behavior: 'smooth' });\n}\n\n"],"names":["createMurkup","objArr","views","comments","downloads","likes","webformatURL","tags","largeImageURL","BASE_URL","API_KEY","searchObject","searchName","page","data","axios","searchForm","search","objectList","loader","loadMoreBtn","lightboxGallery","simpleLightbox","handleSubmit","loadMore","pageLimit","searchValue","event","iziToast","updateMurkup","error","liElement","height","scrollVertical","hits","x","y"],"mappings":"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"}