{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n\nexport const createMurkup =  function (objArr) {\n\n    return objArr.map(({ views, comments, downloads, likes, webformatURL, tags, largeImageURL }) => {\n        return `<li>\n        <div class=\"img-box\">\n        <a href=\"${largeImageURL}\">\n        <img class=\"img\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"200\">\n        </a>\n        <ul class=\"value-list\">\n        <li class=\"likes value-item\"><p class=\"article\">Likes</p><p class=\"value\">${likes}</p></li>\n        <li class=\"views value-item\" ><p class=\"article\">Views</p><p class=\"value\">${views}</p></li>\n        <li class=\"comments value-item\"><p class=\"article\">Comments</p><p class=\"value\">${comments}</p></li>\n        <li class=\"downloads value-item\"><p class=\"article\">Downloads</p><p class=\"value\">${downloads}</p></li>\n        </ul></div>\n        </li>`\n    }).join(\"\");\n};","// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\n\nimport axios from \"axios\";\n\n// тут функції для HTTP запитів\n\n\n// const BASE_URL = \"https://pixabay.com/api/\";\n// const API_KEY = \"43211197-e02e136a3ee46bcda7d5bf66f\";\n\n// export function searchObject(searchName = \"\") {\n//     const params = new URLSearchParams({\n//         key: API_KEY,\n//         q: searchName,\n//         image_type: \"photo\",\n//         orientation: \"horizontal\",\n//         safesearch: true\n//     });\n\n//     return fetch(`${BASE_URL}/?${params}`)\n//         .then(response => {\n//             if (!response.ok) {\n//                 throw new Error(response.status);\n//             }\n//             return response.json();\n//     })\n// };\n\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"43211197-e02e136a3ee46bcda7d5bf66f\";\n\n\n\n\nexport async function searchObject(searchName, page = 1) {\n    const { data } = await axios(`${BASE_URL}`, {\n        params: {\n            key: API_KEY,\n            q: searchName,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            per_page: 15,\n            page\n        }\n    })\n    return data;\n};","// // тут уся логіка роботи\n\nimport * as renderFunction from './js/render-functions.js';\nimport * as pixabayApi from './js/pixabay-api.js';\n\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n// Описаний у документації\nimport simpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst searchForm = document.querySelector(\".search-form\");\nconst search = document.querySelector(\"input\");\nconst objectList = document.querySelector(\".object-list\");\nconst loader = document.querySelector(\".loader-box\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nconst lightboxGallery = new simpleLightbox('.gallery a', {\n    caption: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    showCounter: false\n});\nlet page = 1;\n\nsearchForm.addEventListener(\"submit\", handleSubmit);\nloadMoreBtn.addEventListener(\"click\", loadMore);\n\nfunction handleSubmit(event) {\n    event.preventDefault();\n    \n    if (!search.value) {\n        return iziToast.error({\n            message: \"Sorry, there are no images matching your search query. Please try again!\",\n            backgroundColor: \"red\",\n            closeOnClick: true,\n            position: \"topCenter\"\n        });\n    }\n    \n    loader.style.display = \"flex\";\n\n    const searchValue = event.currentTarget.elements.search.value.trim();\n    \n    pixabayApi.searchObject(searchValue, page)\n    .then(data => {\n            if (!data.total) {\n                loader.style.display = \"none\";\n\n                return iziToast.info({\n                    message: \"Don't found\",\n                    closeOnClick: true,\n                    position: \"topCenter\"\n                })\n            }\n\n            updateMurkup(data.hits);\n            searchForm.reset();\n\n            if ((page*15) <= data.totalHits) {\n                loadMoreBtn.style.display = \"flex\";\n            }\n\n            loader.style.display = \"none\";\n        })\n        .catch(error => {\n            loader.style.display = \"none\";\n            return iziToast.error({\n                message: `${error.message}`,\n                backgroundColor: \"red\",\n                position: \"topCenter\"\n            })\n        })\n}\n\n\n\n\nasync function loadMore(searchValue) {\n    loader.style.display = \"flex\";\n\n    page++;\n\n    loadMoreBtn.disabled = true;\n\n    try {\n        const data = await pixabayApi.searchObject( page);\n        updateMurkup(data.hits);\n        \n        // loadMoreBtn.disabled = false;\n        loader.style.display = \"none\";\n\n        \n        if ((page * 15) > data.totalHits) {\n            loadMoreBtn.style.display = \"none\";\n        }\n    } catch (error) {\n        loader.style.display = \"none\";\n        return iziToast.error({\n            message: `${error.message}`,\n            backgroundColor: \"red\",\n            position: \"topCenter\"\n        })\n    }\n}\n\n\nfunction updateMurkup (hits) {\n        objectList.insertAdjacentHTML('beforeend', renderFunction.createMurkup(hits));\n        lightboxGallery.refresh();\n}\n"],"names":["createMurkup","objArr","views","comments","downloads","likes","webformatURL","tags","largeImageURL","BASE_URL","API_KEY","searchObject","searchName","page","data","axios","searchForm","search","objectList","loader","loadMoreBtn","lightboxGallery","simpleLightbox","handleSubmit","loadMore","event","iziToast","searchValue","pixabayApi.searchObject","updateMurkup","error","hits","renderFunction.createMurkup"],"mappings":"owBAEO,MAAMA,EAAgB,SAAUC,EAAQ,CAE3C,OAAOA,EAAO,IAAI,CAAC,CAAE,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,MAAAC,EAAO,aAAAC,EAAc,KAAAC,EAAM,cAAAC,CAAa,IAC9E;AAAA;AAAA,mBAEIA,CAAa;AAAA,gCACAF,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,oFAG0BF,CAAK;AAAA,qFACJH,CAAK;AAAA,0FACAC,CAAQ;AAAA,4FACNC,CAAS;AAAA;AAAA,cAGhG,EAAE,KAAK,EAAE,CACd,ECWMK,EAAW,2BACXC,EAAU,qCAKT,eAAeC,EAAaC,EAAYC,EAAO,EAAG,CACrD,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAM,GAAGN,CAAQ,GAAI,CACxC,OAAQ,CACJ,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACH,CACT,CAAK,EACD,OAAOC,CACX,CC9BA,MAAME,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,OAAO,EACvCC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAS,SAAS,cAAc,aAAa,EAC7CC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAkB,IAAIC,EAAe,aAAc,CACrD,QAAS,GACT,aAAc,MACd,aAAc,IACd,YAAa,EACjB,CAAC,EACD,IAAIT,EAAO,EAEXG,EAAW,iBAAiB,SAAUO,CAAY,EAClDH,EAAY,iBAAiB,QAASI,CAAQ,EAE9C,SAASD,EAAaE,EAAO,CAGzB,GAFAA,EAAM,eAAc,EAEhB,CAACR,EAAO,MACR,OAAOS,EAAS,MAAM,CAClB,QAAS,2EACT,gBAAiB,MACjB,aAAc,GACd,SAAU,WACtB,CAAS,EAGLP,EAAO,MAAM,QAAU,OAEvB,MAAMQ,EAAcF,EAAM,cAAc,SAAS,OAAO,MAAM,OAE9DG,EAAwBD,EAAad,CAAI,EACxC,KAAKC,GAAQ,CACN,GAAI,CAACA,EAAK,MACN,OAAAK,EAAO,MAAM,QAAU,OAEhBO,EAAS,KAAK,CACjB,QAAS,cACT,aAAc,GACd,SAAU,WAC9B,CAAiB,EAGLG,EAAaf,EAAK,IAAI,EACtBE,EAAW,MAAK,EAEXH,EAAK,IAAOC,EAAK,YAClBM,EAAY,MAAM,QAAU,QAGhCD,EAAO,MAAM,QAAU,MACnC,CAAS,EACA,MAAMW,IACHX,EAAO,MAAM,QAAU,OAChBO,EAAS,MAAM,CAClB,QAAS,GAAGI,EAAM,OAAO,GACzB,gBAAiB,MACjB,SAAU,WAC1B,CAAa,EACJ,CACT,CAKA,eAAeN,EAASG,EAAa,CACjCR,EAAO,MAAM,QAAU,OAEvBN,IAEAO,EAAY,SAAW,GAEvB,GAAI,CACA,MAAMN,EAAO,MAAMc,EAAyBf,CAAI,EAChDgB,EAAaf,EAAK,IAAI,EAGtBK,EAAO,MAAM,QAAU,OAGlBN,EAAO,GAAMC,EAAK,YACnBM,EAAY,MAAM,QAAU,OAEnC,OAAQU,EAAO,CACZ,OAAAX,EAAO,MAAM,QAAU,OAChBO,EAAS,MAAM,CAClB,QAAS,GAAGI,EAAM,OAAO,GACzB,gBAAiB,MACjB,SAAU,WACtB,CAAS,CACJ,CACL,CAGA,SAASD,EAAcE,EAAM,CACrBb,EAAW,mBAAmB,YAAac,EAA4BD,CAAI,CAAC,EAC5EV,EAAgB,QAAO,CAC/B"}